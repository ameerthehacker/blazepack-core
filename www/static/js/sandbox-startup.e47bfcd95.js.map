{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/sandbox/eval/transpilers/babel/worker/index.js","webpack:///../codesandbox-api/dist/codesandbox.es5.js","webpack:///../common/lib/templates/helpers/is-server.js","webpack:///../common/lib/utils/url-generator.js","webpack:///../common/lib/utils/url-generator/dashboard.js","webpack:///../sandbox-hooks/console/index.js","webpack:///../sandbox-hooks/preview-secret.js","webpack:///../sandbox-hooks/screenshot.js","webpack:///../sandbox-hooks/url-listeners.js","webpack:///./src/sandbox/startup.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","8","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","this","oldJsonpFunction","slice","Worker","transformers","transformError","map","filter","x","clearErrorTransformers","registerErrorTransformer","check","__awaiter","thisArg","_arguments","P","generator","step","next","rejected","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","generateId","Math","floor","random","Protocol","handleMessage","_this","outgoingMessages","Set","_messageListener","returnMessage","_a","$type","getTypeId","has","$id","$data","$originId","internalId","source","postMessage","_postMessage","createConnection","isWorker","constructor","getConstructorName","self","addEventListener","dispose","removeEventListener","sendMessage","messageId","add","listenFunction","DedicatedWorkerGlobalScope","notifications","freeze","show","title","notificationType","timeAlive","action","editor","openModule","id","lineNumber","column","path","dependencies","dependencyName","dependency","rename","actions","line","lineEnd","columnEnd","payload","severity","clear","correction","_b","_c","_d","glyph","className","__assign","assign","arguments","bundlers","Map","iframeHandshakeDone","isStandalone","window","location","href","indexOf","opener","parent","iframeHandshake","parentOrigin","parentId","parentOriginListener","origin","resetState","dispatch","newMessage","codesandbox","notifyListeners","rawMessage","JSON","parse","stringify","forEach","frame","notifyFrames","listeners","listenerId","listen","callback","keys","eventListener","registerFrame","bundlerId","set","reattach","isServer","SERVER_TEMPLATE_NAMES","template","__createBinding","k","k2","__setModuleDefault","__importStar","mod","dashboard","teamInviteLink","getSandboxId","privacyUrl","tosUrl","curatorUrl","patronUrl","searchUrl","gitHubToSandboxUrl","optionsToParameterizedUrl","githubRepoUrl","profileLikesUrl","profileSandboxesUrl","teamOverviewUrl","exploreUrl","dashboardUrl","profileUrl","signInVercelUrl","signInUrl","signInPageUrl","forkSandboxUrl","frameUrl","embedUrl","sandboxUrl","editorUrl","uploadFromCliUrl","newCxJSSandboxUrl","newAngularSandboxUrl","newSvelteSandboxUrl","importFromGitHubUrl","newVueSandboxUrl","newPreactSandboxUrl","newDojoSandboxUrl","newReactTypeScriptSandboxUrl","parcelSandboxUrl","newSandboxUrl","newSandboxWizard","protocolAndHost","host","gitHubRepoPattern","is_server_1","gitHubPrefix","dotGit","sandboxHost","buildEncodedUri","strings","values","encodeURIComponent","join","split","protocol","sandboxGitUrl","git","username","repo","branch","sandboxDetails","alias","sandbox","append","useFallbackDomain","port","substr","templateIsServer","sHost","redirectTo","url","extraScopes","teamId","page","options","keyValues","sort","a","githubUrl","replace","query","csbHost","Boolean","tryHost","hostRegex","sandboxRegex","RegExp","matches","match","inviteToken","appendTeamIdQueryParam","search","createWorkspace","teamInvite","permissionSettings","registrySettings","settings","home","deleted","recents","templates","alwaysOn","repos","drafts","allSandboxes","ALL_SANDBOXES_URL_PREFIX","DASHBOARD_URL_PREFIX","sanitizePath","includes","log","command","charAt","wrapped","Function","eval","Encode","getPreviewSecret","cookie","setPreviewSecret","secret","cookieValue","reload","getPopupDimensions","width","height","wLeft","screenLeft","screenX","wTop","screenTop","screenY","left","innerWidth","top","innerHeight","getPopupOffset","listener","previewSecret","sandboxId","endsWith","popup","open","setInterval","close","existingCursor","lib","html2canvas","default","documentElement","useCORS","isSameOrigin","isPrivateSandbox","proxy","logging","allowTaint","canvas","scrollCroppedCanvas","cropScrollLeft","scrollLeft","cropScrollTop","scrollTop","getContext","drawImage","screenshot","toDataURL","style","cursor","shiftKey","metaKey","ctrlKey","preventDefault","history","go","delta","newPos","historyPosition","historyList","state","oldURL","origHistoryProto","replaceState","newURL","sendUrlChange","dispatchEvent","PopStateEvent","disableNextHashChange","HashChangeEvent","back","forward","pushState","pushHistory","defineProperties","pathWithHash","__proto__","pathname","hash","babelworkers","worker","BabelWorker","code","config","presets","version","loaderOptions","setupHistoryListeners","hookConsole","listenForPreviewSecret","setupScreenshotListener"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAKlC,IAFGe,GAAqBA,EAAoBhB,GAEtCO,EAASC,QACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrBiB,EAAG,GAGAZ,EAAkB,GAQtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU8B,QAGnC,IAAIC,EAASH,EAAiB5B,GAAY,CACzCK,EAAGL,EACHgC,GAAG,EACHF,QAAS,IAUV,OANAhB,EAAQd,GAAUW,KAAKoB,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAG/DK,EAAOC,GAAI,EAGJD,EAAOD,QAKfJ,EAAoBO,EAAI,SAAuBhC,GAC9C,IAAIiC,EAAW,GAKXC,EAAqBvB,EAAgBX,GACzC,GAA0B,IAAvBkC,EAGF,GAAGA,EACFD,EAASrB,KAAKsB,EAAmB,QAC3B,CAEN,IAAIC,EAAU,IAAIC,SAAQ,SAASC,EAASC,GAC3CJ,EAAqBvB,EAAgBX,GAAW,CAACqC,EAASC,MAE3DL,EAASrB,KAAKsB,EAAmB,GAAKC,GAGtC,IACII,EADAC,EAASC,SAASC,cAAc,UAGpCF,EAAOG,QAAU,QACjBH,EAAOI,QAAU,IACbnB,EAAoBoB,IACvBL,EAAOM,aAAa,QAASrB,EAAoBoB,IAElDL,EAAOO,IA1DV,SAAwB/C,GACvB,OAAOyB,EAAoBuB,EAAI,cAAgB,GAAGhD,IAAUA,GAAW,IAAM,CAAC,GAAK,YAAY,GAAK,aAAaA,GAAW,YAyD7GiD,CAAejD,GAG5B,IAAIkD,EAAQ,IAAIC,MAChBZ,EAAmB,SAAUa,GAE5BZ,EAAOa,QAAUb,EAAOc,OAAS,KACjCC,aAAaX,GACb,IAAIY,EAAQ7C,EAAgBX,GAC5B,GAAa,IAAVwD,EAAa,CACf,GAAGA,EAAO,CACT,IAAIC,EAAYL,IAAyB,SAAfA,EAAMM,KAAkB,UAAYN,EAAMM,MAChEC,EAAUP,GAASA,EAAMQ,QAAUR,EAAMQ,OAAOb,IACpDG,EAAMW,QAAU,iBAAmB7D,EAAU,cAAgByD,EAAY,KAAOE,EAAU,IAC1FT,EAAMY,KAAO,iBACbZ,EAAMQ,KAAOD,EACbP,EAAMa,QAAUJ,EAChBH,EAAM,GAAGN,GAEVvC,EAAgBX,QAAWgE,IAG7B,IAAIpB,EAAUqB,YAAW,WACxB1B,EAAiB,CAAEmB,KAAM,UAAWE,OAAQpB,MAC1C,MACHA,EAAOa,QAAUb,EAAOc,OAASf,EACjCE,SAASyB,KAAKC,YAAY3B,GAG5B,OAAOJ,QAAQgC,IAAInC,IAIpBR,EAAoB4C,EAAIxD,EAGxBY,EAAoB6C,EAAI3C,EAGxBF,EAAoB8C,EAAI,SAAS1C,EAASiC,EAAMU,GAC3C/C,EAAoBgD,EAAE5C,EAASiC,IAClCvD,OAAOmE,eAAe7C,EAASiC,EAAM,CAAEa,YAAY,EAAMC,IAAKJ,KAKhE/C,EAAoBoD,EAAI,SAAShD,GACX,qBAAXiD,QAA0BA,OAAOC,aAC1CxE,OAAOmE,eAAe7C,EAASiD,OAAOC,YAAa,CAAEC,MAAO,WAE7DzE,OAAOmE,eAAe7C,EAAS,aAAc,CAAEmD,OAAO,KAQvDvD,EAAoBwD,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQvD,EAAoBuD,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAK7E,OAAO8E,OAAO,MAGvB,GAFA5D,EAAoBoD,EAAEO,GACtB7E,OAAOmE,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOvD,EAAoB8C,EAAEa,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIR3D,EAAoB+D,EAAI,SAAS1D,GAChC,IAAI0C,EAAS1C,GAAUA,EAAOqD,WAC7B,WAAwB,OAAOrD,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAL,EAAoB8C,EAAEC,EAAQ,IAAKA,GAC5BA,GAIR/C,EAAoBgD,EAAI,SAASgB,EAAQC,GAAY,OAAOnF,OAAOC,UAAUC,eAAeC,KAAK+E,EAAQC,IAGzGjE,EAAoBuB,EAAI,IAGxBvB,EAAoBkE,GAAK,SAASC,GAA2B,MAApBC,QAAQ3C,MAAM0C,GAAYA,GAEnE,IAAIE,EAAaC,KAAe,SAAIA,KAAe,UAAK,GACpDC,EAAmBF,EAAWlF,KAAK2E,KAAKO,GAC5CA,EAAWlF,KAAOf,EAClBiG,EAAaA,EAAWG,QACxB,IAAI,IAAI7F,EAAI,EAAGA,EAAI0F,EAAWxF,OAAQF,IAAKP,EAAqBiG,EAAW1F,IAC3E,IAAIU,EAAsBkF,EAI1BhF,EAAgBJ,KAAK,CAAC,2BAA2B,KAE1CM,I,0KC5NTY,EAAOD,QAAU,WACf,OAAO,IAAIqE,OAAO,0C,0ECDpB,0lBAAIC,EAAe,GACnB,SAASC,EAAelD,EAAOpB,EAAQjB,GAEnC,OADwBsF,EAAaE,KAAI,SAAU/B,GAAK,OAAOA,EAAEpB,EAAOpB,EAAQjB,MAAayF,QAAO,SAAUC,GAAK,OAAY,MAALA,KACjG,GAE7B,SAASC,IACLL,EAAa7F,OAAS,EAE1B,SAASmG,EAAyBC,GAC9BP,EAAavF,KAAK8F,GAGtB,IAAIC,EAAkD,SAAUC,EAASC,EAAYC,EAAGC,GAEpF,OAAO,IAAKD,IAAMA,EAAI1E,WAAU,SAAUC,EAASC,GAC/C,SAASjB,EAAU2D,GAAS,IAAMgC,EAAKD,EAAUE,KAAKjC,IAAW,MAAOhD,GAAKM,EAAON,IACpF,SAASkF,EAASlC,GAAS,IAAMgC,EAAKD,EAAiB,MAAE/B,IAAW,MAAOhD,GAAKM,EAAON,IACvF,SAASgF,EAAK7F,GAJlB,IAAe6D,EAIa7D,EAAOgG,KAAO9E,EAAQlB,EAAO6D,QAJ1CA,EAIyD7D,EAAO6D,MAJhDA,aAAiB8B,EAAI9B,EAAQ,IAAI8B,GAAE,SAAUzE,GAAWA,EAAQ2C,OAIToC,KAAK/F,EAAW6F,GAClGF,GAAMD,EAAYA,EAAU9F,MAAM2F,EAASC,GAAc,KAAKI,YAGlEI,EAAsD,SAAUT,EAASU,GACzE,IAAsGC,EAAGC,EAAGvC,EAAGwC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP3C,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO4C,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAER,KAAMc,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXjD,SAA0B2C,EAAE3C,OAAOkD,UAAY,WAAa,OAAOjC,OAAU0B,EACvJ,SAASM,EAAKvC,GAAK,OAAO,SAAUyC,GAAK,OACzC,SAAcC,GACV,GAAIX,EAAG,MAAM,IAAIY,UAAU,mCAC3B,KAAOT,GAAG,IACN,GAAIH,EAAI,EAAGC,IAAMvC,EAAY,EAARiD,EAAG,GAASV,EAAU,OAAIU,EAAG,GAAKV,EAAS,SAAOvC,EAAIuC,EAAU,SAAMvC,EAAEvE,KAAK8G,GAAI,GAAKA,EAAEP,SAAWhC,EAAIA,EAAEvE,KAAK8G,EAAGU,EAAG,KAAKf,KAAM,OAAOlC,EAE3J,OADIuC,EAAI,EAAGvC,IAAGiD,EAAK,CAAS,EAARA,EAAG,GAAQjD,EAAED,QACzBkD,EAAG,IACP,KAAK,EAAG,KAAK,EAAGjD,EAAIiD,EAAI,MACxB,KAAK,EAAc,OAAXR,EAAEC,QAAgB,CAAE3C,MAAOkD,EAAG,GAAIf,MAAM,GAChD,KAAK,EAAGO,EAAEC,QAASH,EAAIU,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKR,EAAEI,IAAIM,MAAOV,EAAEG,KAAKO,MAAO,SACxC,QACI,KAAkBnD,GAAZA,EAAIyC,EAAEG,MAAYvH,OAAS,GAAK2E,EAAEA,EAAE3E,OAAS,MAAkB,IAAV4H,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAER,EAAI,EAAG,SACjG,GAAc,IAAVQ,EAAG,MAAcjD,GAAMiD,EAAG,GAAKjD,EAAE,IAAMiD,EAAG,GAAKjD,EAAE,IAAM,CAAEyC,EAAEC,MAAQO,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYR,EAAEC,MAAQ1C,EAAE,GAAI,CAAEyC,EAAEC,MAAQ1C,EAAE,GAAIA,EAAIiD,EAAI,MAC7D,GAAIjD,GAAKyC,EAAEC,MAAQ1C,EAAE,GAAI,CAAEyC,EAAEC,MAAQ1C,EAAE,GAAIyC,EAAEI,IAAIlH,KAAKsH,GAAK,MACvDjD,EAAE,IAAIyC,EAAEI,IAAIM,MAChBV,EAAEG,KAAKO,MAAO,SAEtBF,EAAKZ,EAAK5G,KAAKkG,EAASc,GAC1B,MAAO1F,GAAKkG,EAAK,CAAC,EAAGlG,GAAIwF,EAAI,EAAK,QAAUD,EAAItC,EAAI,EACtD,GAAY,EAARiD,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAElD,MAAOkD,EAAG,GAAKA,EAAG,QAAK,EAAQf,MAAM,GArB9BH,CAAK,CAACxB,EAAGyC,OAwBzDI,EAAa,WAEb,OAAOC,KAAKC,MAAsB,IAAhBD,KAAKE,SAAqC,IAAhBF,KAAKE,WAUjDC,EAA0B,WAC1B,SAASA,EAAS/E,EAAMgF,EAAe9E,GACnC,IAAI+E,EAAQ5C,KACZA,KAAKrC,KAAOA,EACZqC,KAAK2C,cAAgBA,EACrB3C,KAAKnC,OAASA,EACdmC,KAAK6C,iBAAmB,IAAIC,IAC5B9C,KAAK+C,iBAAmB,SAAU9G,GAAK,OAAO2E,EAAUgC,OAAO,OAAQ,GAAQ,WAC3E,IAAI7I,EAAMqB,EAAQ4H,EAClB,OAAO1B,EAAYtB,MAAM,SAAUiD,GAC/B,OAAQA,EAAGrB,OACP,KAAK,EAED,OADA7H,EAAOkC,EAAElC,MACAmJ,QAAUlD,KAAKmD,aAIpBnD,KAAK6C,iBAAiBO,IAAIrJ,EAAKsJ,KAHxB,CAAC,GAML,CAAC,EAAarD,KAAK2C,cAAc5I,EAAKuJ,QACjD,KAAK,EAeD,OAdAlI,EAAS6H,EAAGpB,OACZmB,EAAgB,CACZO,UAAWvD,KAAKwD,WAChBN,MAAOlD,KAAKmD,YACZG,MAAOlI,EACPiI,IAAKtJ,EAAKsJ,KAEVpH,EAAEwH,OAEFxH,EAAEwH,OAAOC,YAAYV,EAAe,KAGpChD,KAAK2D,aAAaX,GAEf,CAAC,WAIxBhD,KAAK4D,mBACL5D,KAAKwD,WAAalB,IAClBtC,KAAK6D,SAA0C,WAlD9B,SAAUrD,GAC/B,IACI,OAAOA,EAAEsD,YAAY/F,KAEzB,MAAO9B,GACH,MAAO,IA6CS8H,CAAmBlG,GAgDvC,OA9CA6E,EAASjI,UAAU0I,UAAY,WAC3B,MAAO,KAAOnD,KAAKrC,MAEvB+E,EAASjI,UAAUmJ,iBAAmB,WAClCI,KAAKC,iBAAiB,UAAWjE,KAAK+C,mBAE1CL,EAASjI,UAAUyJ,QAAU,WACzBF,KAAKG,oBAAoB,UAAWnE,KAAK+C,mBAE7CL,EAASjI,UAAU2J,YAAc,SAAUrK,GACvC,IAAI6I,EAAQ5C,KACZ,OAAO,IAAI3D,SAAQ,SAAUC,GACzB,IAAI+H,EAAY/B,IACZxE,EAAU,CACVyF,UAAWX,EAAMY,WACjBN,MAAON,EAAMO,YACbG,MAAOvJ,EACPsJ,IAAKgB,GAETzB,EAAMC,iBAAiByB,IAAID,GAC3B,IAAIE,EAAiB,SAAUtI,GAC3B,IAAIlC,EAAOkC,EAAElC,KACTA,EAAKmJ,QAAUN,EAAMO,aACrBpJ,EAAKsJ,MAAQgB,GACbtK,EAAKwJ,YAAcX,EAAMY,aACzBlH,EAAQvC,EAAKuJ,OACbU,KAAKG,oBAAoB,UAAWI,KAG5CP,KAAKC,iBAAiB,UAAWM,GACjC3B,EAAMe,aAAa7F,OAG3B4E,EAASjI,UAAUkJ,aAAe,SAAUrF,GACpC0B,KAAK6D,UAEkC,qBAA/BW,4BAEJxE,KAAKnC,kBAAkB2G,2BAE3BxE,KAAKnC,OAAO6F,YAAYpF,GAGxB0B,KAAKnC,OAAO6F,YAAYpF,EAAG,MAG5BoE,EA1FkB,GAoH7B,IAAI+B,EAAgBjK,OAAOkK,OAAO,CACjCC,KAfD,SAAcC,EAAOC,EAAkBC,GAInC,YAHyB,IAArBD,IAA+BA,EAAmB,eACpC,IAAdC,IAAwBA,EAAY,GAEjC,CACHnH,KAAM,SACNoH,OAAQ,eACRH,MAAOA,EACPC,iBAAkBA,EAClBC,UAAWA,MAqBnB,IAAIE,EAASxK,OAAOkK,OAAO,CAC1BO,WAbD,SAAoBC,EAAIC,EAAYC,GAEhC,MAAO,CACHzH,KAAM,SACNoH,OAAQ,qBACRM,KAAMH,EACNC,WAAYA,EACZC,OAAQA,MAgChB,IAIIE,EAlBI9K,OAAOkK,OAAO,CACrBJ,IAVD,SAAaiB,GACT,MAAO,CACH5H,KAAM,SACNoH,OAAQ,0BACRS,WAAYD,MAwBhBzK,EALIN,OAAOkK,OAAO,CACrBe,OAXD,SAAgBJ,EAAMT,GAClB,MAAO,CACHjH,KAAM,SACNoH,OAAQ,uBACRM,KAAMA,EACNT,MAAOA,MA+Hf,IAOIc,EAAU,CACVjB,cAAeA,EACfO,OAAQA,EACRvB,OA5HSjJ,OAAOkK,OAAO,CAC1BY,aAAcA,EACdxK,QAASA,IA2HNqC,MAnFQ3C,OAAOkK,OAAO,CACzBC,KA5BD,SAAgBC,EAAO9G,EAASmF,GAC5B,IAAI0C,EAAO1C,EAAG0C,KAAMP,EAASnC,EAAGmC,OAAQQ,EAAU3C,EAAG2C,QAASC,EAAY5C,EAAG4C,UAC7E,MAAO,CACHjB,MAAOA,EACP9G,QAASA,EACT6H,KAAMA,EACNP,OAAQA,EACRC,KAN2FpC,EAAGoC,KAO9FS,QAP8G7C,EAAG6C,QAQjHF,QAASA,EACTC,UAAWA,EACXE,SAAU,QACVpI,KAAM,SACNoH,OAAQ,aACRtB,OAbmIR,EAAGQ,QAapH,YAezBuC,MAZD,SAAeX,EAAM5B,GACjB,MAAO,CACH9F,KAAM,SACNoH,OAAQ,eACRM,KAAMA,EACN5B,OAAQA,MAyFZwC,WAvCazL,OAAOkK,OAAO,CAC9BC,KA/BD,SAAgB7G,EAASmF,GACrB,IAAIiD,OAAY,IAAPjD,EAAgB,CACrBoC,KAAM,GACNU,SAAU,UACVtC,OAAQ,IACRR,EAAI0C,EAAOO,EAAGP,KAAMP,EAASc,EAAGd,OAAQQ,EAAUM,EAAGN,QAASC,EAAYK,EAAGL,UAAWR,EAAOa,EAAGb,KAAMS,EAAUI,EAAGJ,QAASK,EAAKD,EAAGH,SAAUA,OAAkB,IAAPI,EAAgB,UAAYA,EAAIC,EAAKF,EAAGzC,OACvM,MAAO,CACH3F,QAASA,EACT6H,KAAMA,EACNP,OAAQA,EACRQ,QAASA,EACTC,UAAWA,EACXR,KAAMA,EACNS,QAASA,EACTC,SAAUA,EACVtC,YAV2N,IAAP2C,EAAgB,GAAKA,EAWzOzI,KAAM,SACNoH,OAAQ,oBAefiB,MAZD,SAAiBX,EAAM5B,GACnB,MAAO,CACH9F,KAAM,SACNoH,OAAQ,oBACRM,KAAMA,EACN5B,OAAQA,MA6CZ4C,MAbQ7L,OAAOkK,OAAO,CACzBC,KAbD,SAAgB1B,GAEZ,MAAO,CACH0C,KAFO1C,EAAG0C,KAGVN,KAHuBpC,EAAGoC,KAI1BiB,UAJ4CrD,EAAGqD,UAK/C3I,KAAM,SACNoH,OAAQ,kBAwBZwB,EAAgD,WAShD,OARAA,EAAW/L,OAAOgM,QAAU,SAAStH,GACjC,IAAK,IAAIvD,EAAGtB,EAAI,EAAGoF,EAAIgH,UAAUlM,OAAQF,EAAIoF,EAAGpF,IAE5C,IAAK,IAAI4C,KADTtB,EAAI8K,UAAUpM,GACOG,OAAOC,UAAUC,eAAeC,KAAKgB,EAAGsB,KACzDiC,EAAEjC,GAAKtB,EAAEsB,IAEjB,OAAOiC,IAEKhE,MAAM8E,KAAMyG,YAG5BC,EAAW,IAAIC,IAoBnB,IACIC,EADAC,EAlBsB,qBAAXC,WAGPA,OAAOC,UAAYD,OAAOC,SAASC,KAAKC,QAAQ,gBAAkB,KAGlEH,OAAOI,QAAUJ,OAAOK,SAAWL,WAC/BA,OAAOC,UAAYD,OAAOC,SAASC,KAAKC,QAvB/B,2BAuBkD,GAgBnEG,EAAkB,IAAI/K,SAAQ,SAAUC,GACxCsK,EAAsBtK,KAGtB+K,EAAe,KACfC,EAAW,KACXC,EAAuB,SAAUtL,GACjC,IAAIgH,EACgB,mBAAhBhH,EAAElC,KAAK4D,MAA8B2J,IACrCD,EAAepL,EAAElC,KAAKyN,OACtBF,EAAgC,QAApBrE,EAAKhH,EAAElC,KAAKmL,UAAuB,IAAPjC,EAAgBA,EAAK,KACzD2D,GACAA,IAEJ5C,KAAKG,oBAAoB,UAAWoD,KAM5C,SAASE,IACLJ,EAAe,KACfX,EAASV,QASb,SAAS0B,EAAS5J,GACd,GAAKA,EAAL,CAEA,IAAI6J,EAAapB,EAASA,EAAS,GAAIzI,GAAU,CAAE8J,aAAa,IAC/C,OAAbN,IACAK,EAAWtE,IAAMiE,GAErBO,EAAgBF,GAuCpB,SAAsB7J,GAClB,IAAIgK,EAAaC,KAAKC,MAAMD,KAAKE,UAAUnK,IAC3C4I,EAASwB,SAAQ,SAAUV,EAAQW,GAC3BA,GAASA,EAAMzE,aACfyE,EAAMzE,YAAY6C,EAASA,EAAS,GAAIuB,GAAa,CAAEF,aAAa,IAASJ,MA1CrFY,CAAaT,GACTd,GAEiB,OAAjBQ,GAA0C,gBAAjBvJ,EAAQH,OAEjCmJ,OAAOI,OACPJ,OAAOI,OAAOxD,YAAYiE,EAA6B,OAAjBN,EAAwB,IAAMA,GAGpEP,OAAOK,OAAOzD,YAAYiE,EAA6B,OAAjBN,EAAwB,IAAMA,KA/BtD,qBAAXP,QACP9C,KAAKC,iBAAiB,UAAWsD,GAiCrC,IAAIc,EAAY,GACZC,EAAa,EAKjB,SAASC,EAAOC,GACZ,IAAItD,IAAOoD,EAEX,OADAD,EAAUnD,GAAMsD,EACT,kBACIH,EAAUnD,IAGzB,SAAS2C,EAAgB9N,EAAM0J,GAE3BjJ,OAAOiO,KAAKJ,GAAWH,SAAQ,SAAUI,GACrC,GAAID,EAAUC,GACV,IACID,EAAUC,GAAYvO,EAAM0J,GAEhC,MAAOxH,QAcnB,SAASyM,EAAczM,GACnB,IAAIlC,EAAOkC,EAAElC,MACTA,IACAA,EAAK6N,aACa,OAAjBP,GAAyBpL,EAAEuL,SAAWH,GAC1B,MAAZtN,EAAKsJ,KAA4B,OAAbiE,GAAqBA,IAAavN,EAAKsJ,KAC5DwE,EAAgB9N,EAAMkC,EAAEwH,QAQhC,SAASkF,EAAcR,EAAOX,EAAQoB,GAClClC,EAASmC,IAAIV,EAAOX,GACpBW,EAAMzE,YAAY,CACd/F,KAAM,iBACN6J,OAAQ9K,SAASqK,SAASS,OAC1BtC,GAAI0D,GACLpB,GAaP,SAASsB,IACDjC,EACAC,OAAO7C,iBAAiB,UAAWyE,GAGnCtB,EAAgB/F,MAAK,WACjByF,OAAO7C,iBAAiB,UAAWyE,MAjBzB,qBAAX5B,SACHD,EACAC,OAAO7C,iBAAiB,UAAWyE,GAGnCtB,EAAgB/F,MAAK,WAEjByF,OAAO7C,iBAAiB,UAAWyE,Q,4EC9f/ClO,OAAOmE,eAAe7C,EAAS,aAAc,CAAEmD,OAAO,IACtDnD,EAAQiN,cAAW,EACnB,MAAMC,EAAwB,CAC1B,SACA,SACA,QACA,SACA,WACA,QACA,WACA,OACA,OACA,OACA,OACA,SACA,SACA,eACA,SACA,WACA,cAEJlN,EAAQiN,SAAYE,IAA0D,IAA7CD,EAAsB/B,QAAQgC,I,oECrB/D,IAAIC,EAAmBlJ,MAAQA,KAAKkJ,kBAAqB1O,OAAO8E,OAAS,SAAUZ,EAAGJ,EAAG6K,EAAGC,QAC7EnL,IAAPmL,IAAkBA,EAAKD,GAC3B3O,OAAOmE,eAAeD,EAAG0K,EAAI,CAAExK,YAAY,EAAMC,IAAK,WAAa,OAAOP,EAAE6K,OAC3E,SAAUzK,EAAGJ,EAAG6K,EAAGC,QACTnL,IAAPmL,IAAkBA,EAAKD,GAC3BzK,EAAE0K,GAAM9K,EAAE6K,KAEVE,EAAsBrJ,MAAQA,KAAKqJ,qBAAwB7O,OAAO8E,OAAS,SAAUZ,EAAGwD,GACxF1H,OAAOmE,eAAeD,EAAG,UAAW,CAAEE,YAAY,EAAMK,MAAOiD,KAC9D,SAASxD,EAAGwD,GACbxD,EAAW,QAAIwD,IAEfoH,EAAgBtJ,MAAQA,KAAKsJ,cAAiB,SAAUC,GACxD,GAAIA,GAAOA,EAAInK,WAAY,OAAOmK,EAClC,IAAInO,EAAS,GACb,GAAW,MAAPmO,EAAa,IAAK,IAAIJ,KAAKI,EAAe,YAANJ,GAAmB3O,OAAOC,UAAUC,eAAeC,KAAK4O,EAAKJ,IAAID,EAAgB9N,EAAQmO,EAAKJ,GAEtI,OADAE,EAAmBjO,EAAQmO,GACpBnO,GAEXZ,OAAOmE,eAAe7C,EAAS,aAAc,CAAEmD,OAAO,IACtDnD,EAAQ0N,UAAY1N,EAAQ2N,eAAiB3N,EAAQ4N,aAAe5N,EAAQ6N,WAAa7N,EAAQ8N,OAAS9N,EAAQ+N,WAAa/N,EAAQgO,UAAYhO,EAAQiO,UAAYjO,EAAQkO,mBAAqBlO,EAAQmO,0BAA4BnO,EAAQoO,cAAgBpO,EAAQqO,gBAAkBrO,EAAQsO,oBAAsBtO,EAAQuO,gBAAkBvO,EAAQwO,WAAaxO,EAAQyO,aAAezO,EAAQ0O,WAAa1O,EAAQ2O,gBAAkB3O,EAAQ4O,UAAY5O,EAAQ6O,cAAgB7O,EAAQ8O,eAAiB9O,EAAQ+O,SAAW/O,EAAQgP,SAAWhP,EAAQiP,WAAajP,EAAQkP,UAAYlP,EAAQmP,iBAAmBnP,EAAQoP,kBAAoBpP,EAAQqP,qBAAuBrP,EAAQsP,oBAAsBtP,EAAQuP,oBAAsBvP,EAAQwP,iBAAmBxP,EAAQyP,oBAAsBzP,EAAQ0P,kBAAoB1P,EAAQ2P,6BAA+B3P,EAAQ4P,iBAAmB5P,EAAQ6P,cAAgB7P,EAAQ8P,iBAAmB9P,EAAQ+P,gBAAkB/P,EAAQgQ,KAAOhQ,EAAQiQ,uBAAoB,EACl+B,MAAMC,EAAc,EAAQ,gDACtBxC,EAAYF,EAAa,EAAQ,mDACvCxN,EAAQ0N,UAAYA,EACpB1N,EAAQiQ,kBAAoB,kDAC5B,MAAME,EAAe,oCACfC,EAAS,WACTC,EAAc,CAChB,yBAA0B,kBAC1B,6BAA8B,2BAE5BC,EAAkB,CAACC,KAAYC,IAAWD,EAAQ,GACpDC,EACKhM,IAAI,CAACrB,EAAO5E,IAAM,GAAGkS,mBAAmBtN,KAASoN,EAAQhS,EAAI,MAC7DmS,KAAK,IACd1Q,EAAQgQ,KAAO,IAEA,GAA6BW,MAAM,MAAM,GAOxD3Q,EAAQ+P,gBAAkB,IAAM,GAAG9E,SAAS2F,aAAa5Q,EAAQgQ,SACjEhQ,EAAQ8P,iBAAmB,IAAM,KACjC9P,EAAQ6P,cAAgB,IAAM,SAC9B7P,EAAQ4P,iBAAmB,IAAM,aACjC5P,EAAQ2P,6BAA+B,IAAM,cAC7C3P,EAAQ0P,kBAAoB,IAAM,2CAClC1P,EAAQyP,oBAAsB,IAAM,YACpCzP,EAAQwP,iBAAmB,IAAM,SACjCxP,EAAQuP,oBAAsB,IAAM,YACpCvP,EAAQsP,oBAAsB,IAAM,YACpCtP,EAAQqP,qBAAuB,IAAM,aACrCrP,EAAQoP,kBAAoB,IAAM,6CAClCpP,EAAQmP,iBAAmB,IAAM,SACjC,MAAM0B,EAAiBC,GAAQR,CAAgB,UAAUQ,EAAIC,YAAYD,EAAIE,aAAaF,EAAIG,UAC1FH,EAAIvH,KACRvJ,EAAQkP,UAAY,IAAM,MAC1BlP,EAAQiP,WAAciC,IAClB,GAAIA,EAAeJ,IAAK,CACpB,MAAM,IAAEA,GAAQI,EAChB,MAAO,GAAGlR,EAAQkP,cAAc2B,EAAcC,KAElD,OAAII,EAAeC,MACR,GAAGnR,EAAQkP,cAAcgC,EAAeC,QAE5C,GAAGnR,EAAQkP,cAAcgC,EAAe9H,MAEnDpJ,EAAQgP,SAAYoC,IAChB,GAAIA,EAAQN,IAAK,CACb,MAAM,IAAEA,GAAQM,EAChB,MAAO,UAAUP,EAAcC,GAEnC,OAAIM,EAAQD,MACD,UAAUC,EAAQD,MAEtB,UAAUC,EAAQhI,IAU7BpJ,EAAQ+O,SAAW,CAACqC,EAASC,EAAS,IAAMC,qBAAoB,EAAOC,QAAsB,MACzF,MAAMhI,EAA+B,IAAxB8H,EAAOlG,QAAQ,KAAakG,EAAOG,OAAO,GAAKH,EACtDI,EAAmBvB,EAAYjD,SAASmE,EAAQjE,UAOtD,IAAIuE,EAAQ1R,EAAQgQ,OAMpB,QALI,WAAW0B,KAAWrB,IACrBiB,GACAG,IACDC,EAAQrB,EAAY,WAAWqB,GAASf,MAAM,MAAM,IAEjD,GAAG1F,SAAS2F,aAAaQ,EAAQhI,KAAKmI,EAAO,IAAIA,EAAS,MAAME,EAAmB,OAAS,KAAKC,KAASnI,KAErHvJ,EAAQ8O,eAAkBsC,GAAepR,EAAQiP,WAAWmC,GAAtB,QACtCpR,EAAQ6O,cAAiB8C,IACrB,IAAIC,EAAM,UAIV,OAHID,IACAC,GAAO,aAAeD,GAEnBC,GAEX5R,EAAQ4O,UAAY,CAACiD,GAAc,IAAU,gBAAkBA,EAAc,gCAAkC,IAC/G7R,EAAQ2O,gBAAkB,IAAM,eAChC3O,EAAQ0O,WAAcqC,GAAa,MAAMA,EACzC/Q,EAAQyO,aAAe,IAAM,aAC7BzO,EAAQwO,WAAa,IAAM,WAC3BxO,EAAQuO,gBAAmBuD,GAAW,oBAAoBA,EAC1D9R,EAAQsO,oBAAsB,CAACyC,EAAUgB,IAAS,GAAG/R,EAAQ0O,WAAWqC,eAAsBgB,EAAO,IAAIA,EAAS,KAClH/R,EAAQqO,gBAAkB,CAAC0C,EAAUgB,IAAS,GAAG/R,EAAQ0O,WAAWqC,WAAkBgB,EAAO,IAAIA,EAAS,KAC1G/R,EAAQoO,cAAgB,EAAG4C,OAAMC,SAAQF,WAAUxH,UAAY+G,CAAgB,sBAAsBS,KAAYC,UAAaC,KAC1H1H,EACJvJ,EAAQmO,0BAA6B6D,IACjC,MAAMC,EAAYvT,OAAOiO,KAAKqF,GACzBE,OACAzN,OAAO0N,GAAKH,EAAQG,IACpB3N,IAAIf,GAAO,GAAGgN,mBAAmBhN,MAAQgN,mBAAmBuB,EAAQvO,OACpEiN,KAAK,KACV,OAAOuB,EAAY,IAAIA,EAAc,IAEzCjS,EAAQkO,mBAAsBkE,GAAcA,EAAUC,QAAQlC,EAAc,aAAakC,QAAQjC,EAAQ,IACzGpQ,EAAQiO,UAAaqE,GAAU,WAAUA,EAAQ,UAAUA,EAAU,IACrEtS,EAAQgO,UAAY,IAAM,UAC1BhO,EAAQ+N,WAAa,IAAM,WAC3B/N,EAAQ8N,OAAS,IAAM,eACvB9N,EAAQ6N,WAAa,IAAM,iBA0B3B7N,EAAQ4N,aAzBR,WACI,MAAM2E,EAAU,GAUhB,IAAIjT,EASJ,GARA,CAACiT,EAASlC,EAAYkC,IAAU9N,OAAO+N,SAASpG,QAAQqG,IACpD,MAAMC,EAAYD,EAAQJ,QAAQ,cAAe,IAAIA,QAAQ,MAAO,OAC9DM,EAAe,IAAIC,OAAO,UAAUF,GACpCG,EAAUjS,SAASqK,SAAS+E,KAAK8C,MAAMH,GACzCE,IACAvT,EAASuT,EAAQ,OAGpBvT,EACD,MAAM,IAAIgC,MAAM,gDAEpB,OAAOhC,GAGXU,EAAQ2N,eAAkBoF,GAAgB,GAAG/S,EAAQ+P,4BAA4BgD,K,8EC/JjF,SAASC,EAAuBpB,EAAKE,GACjC,OAAIA,EACO,GAAGF,eAAiBE,IAExBF,EARXlT,OAAOmE,eAAe7C,EAAS,aAAc,CAAEmD,OAAO,IACtDnD,EAAQiT,OAASjT,EAAQkT,gBAAkBlT,EAAQmT,WAAanT,EAAQoT,mBAAqBpT,EAAQqT,iBAAmBrT,EAAQsT,SAAWtT,EAAQuT,KAAOvT,EAAQwT,QAAUxT,EAAQyT,QAAUzT,EAAQ0T,UAAY1T,EAAQ2T,SAAW3T,EAAQ4T,MAAQ5T,EAAQ6T,OAAS7T,EAAQ8T,aAAe9T,EAAQ+T,yBAA2B/T,EAAQgU,0BAAuB,EAC/VhU,EAAQgU,qBAAuB,aAC/BhU,EAAQ+T,yBAA8B/T,EAAQgU,qBAAX,OAanChU,EAAQ8T,aAAe,CAACvK,EAAMuI,IAAWkB,EAAuB,GAAGhT,EAAQ+T,2BAN3E,SAAsBxK,GAClB,OAAOA,EACFoH,MAAM,KACNnM,IAAIrD,GAAKA,EAAEwP,MAAM,KAAKnM,IAAIiM,oBAAoBC,KAAK,MACnDA,KAAK,KAEwFuD,CAAa1K,KAASuI,GAC5H9R,EAAQ6T,OAAU/B,GAAWkB,EAA0BhT,EAAQgU,qBAAX,UAA0ClC,GAC9F9R,EAAQ4T,MAAS9B,GAAWkB,EAA0BhT,EAAQgU,qBAAX,gBAAgDlC,GACnG9R,EAAQ2T,SAAY7B,GAAWkB,EAA0BhT,EAAQgU,qBAAX,aAA6ClC,GACnG9R,EAAQ0T,UAAa5B,GAAWkB,EAA0BhT,EAAQgU,qBAAX,aAA6ClC,GACpG9R,EAAQyT,QAAW3B,GAAWkB,EAA0BhT,EAAQgU,qBAAX,UAA0ClC,GAC/F9R,EAAQwT,QAAW1B,GAAWkB,EAA0BhT,EAAQgU,qBAAX,WAA2ClC,GAChG9R,EAAQuT,KAAQzB,GAAWkB,EAA0BhT,EAAQgU,qBAAX,QAAwClC,GAC1F9R,EAAQsT,SAAYxB,GAAWkB,EAA0BhT,EAAQgU,qBAAX,YAA4ClC,GAClG9R,EAAQqT,iBAAoBvB,GAAWkB,EAA0BhT,EAAQgU,qBAAX,yBAAyDlC,GACvH9R,EAAQoT,mBAAsBtB,GAAWkB,EAA0BhT,EAAQgU,qBAAX,wBAAwDlC,GACxH9R,EAAQmT,WAAcrB,GAAWkB,EAA0BhT,EAAQgU,qBAAX,mBAAmDlC,GAC3G9R,EAAQkT,gBAAmBpB,GAAWkB,EAA0BhT,EAAQgU,qBAAX,gBAAgDlC,GAC7G9R,EAAQiT,OAAS,CAACX,EAAOR,KACrB,IAAI7D,EAAY+E,EAA0BhT,EAAQgU,qBAAX,UAA0ClC,GAQjF,OAPI7D,EAAUiG,SAAS,KACnBjG,GAAa,IAGbA,GAAa,IAEjBA,GAAa,SAASqE,EACfrE,I,+nBCnCI,WAiDb,OAhDA,aAAKjD,OAAOhH,QAAZ,+CAAqB,WAAMmQ,GAAN,uFACb7I,EADa,wBAEnB,IAAAM,UAAS,CACP/J,KAAM,UACNsS,QAJiB,2CAArB,wDAgDO,IAAA1H,SAxCP,SAAuBxO,EAAM0J,GAC3B,GAAIA,GACgB,aAAd1J,EAAK4D,KAAqB,CAC5B,IAAIvC,EAAS,KACT+B,GAAQ,EACZ,IAIE,GAAIpD,EAAKmW,SAAsC,MAA3BnW,EAAKmW,QAAQC,OAAO,GACtC,IACE,IAAMC,EAAU,IAAH,OAAOrW,EAAKmW,QAAZ,KAGI,IAAIG,SAASD,GAC9BrW,EAAKmW,QAAUE,EACf,MAAOnU,IAKXb,GAAS,EAAIkV,MAAMvW,EAAKmW,SACxB,MAAOjU,GACPb,EAASa,EACTkB,GAAQ,EAGV,KACE,IAAAuK,UAAS,CACP/J,KAAM,cACNR,QACA/B,QAAQ,IAAAmV,QAAOnV,KAEjB,MAAOa,GACP6D,QAAQ3C,MAAMlB,S,mcC7CxB,IAEauU,EAAmB,kBAC9B9T,SAAS+T,OAAOtC,QACd,IAAIO,OAAJ,0BAJ+B,qBAI/B,gCAGA,O,qBAGG,IAAMgC,EAAmB,SAAAC,GAC9B,GAAe,OAAXA,EAAJ,CAIA,IAAMC,EAAcJ,KAEjBI,IAAgBD,GAChBA,IAAWC,GACZA,IAAgBD,KAEZA,GACFjU,SAAS+T,OAAT,UAtB6B,qBAsB7B,YAAmDE,EAAnD,0BAEAzS,YAAW,WACT6I,SAAS8J,WACR,MAEHnU,SAAS+T,OAAT,UA5B6B,qBA4B7B,gDAkCN,SAASK,IAAsB,IAAD,EAHrB,CAAEC,MAAO,KAAMC,OAAQ,KAItBD,EADoB,EACpBA,MAAOC,EADa,EACbA,OADa,EAd9B,YAA4C,IAAlBD,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,OACzBC,EAAQnK,OAAOoK,WAAapK,OAAOoK,WAAapK,OAAOqK,QACvDC,EAAOtK,OAAOuK,UAAYvK,OAAOuK,UAAYvK,OAAOwK,QAEpDC,EAAON,EAAQnK,OAAO0K,WAAa,EAAIT,EAAQ,EAGrD,MAAO,CAAEU,IAFGL,EAAOtK,OAAO4K,YAAc,EAAIV,EAAS,EAEvCO,QASQI,CAAe,CAAEZ,QAAOC,WAAtCS,EAFoB,EAEpBA,IAAKF,EAFe,EAEfA,KAEb,sBAAgBR,EAAhB,mBAAgCC,EAAhC,gBAA8CS,EAA9C,iBAA0DF,G,8CAjCtB,WACpC,IAAMK,EAAW,SAAA7X,GACf,GAAIA,EAAKA,MAA4B,mBAApBA,EAAKA,KAAKmJ,MAA4B,CAAC,IAC9C2O,EAAkB9X,EAAKA,KAAvB8X,cACRnB,EAAiBmB,KAMrB,OAFA/K,OAAO7C,iBAAiB,UAAW2N,GAE5B,WACL9K,OAAO3C,oBAAoB,UAAWyN,K,8BA0CC,SAAAE,GACzC,IAAMhG,EARFpP,SAASqK,SAAS+E,KAAKiG,SAAS,WAC3B,6BAGF,yBAKDC,EAAQlL,OAAOmL,KACnBnG,EAAO,iBAAmBgG,EAC1B/T,KAFY,gGAG6E+S,MAG3FoB,aAAY,WACVF,EAAMtO,YAAY,CAAER,MAAO,0BAA4B4I,KACtD,KAUHhF,OAAO7C,iBAAiB,WARP,SAAX2N,EAAW3V,GACXA,EAAElC,MAAyB,mBAAjBkC,EAAElC,KAAKmJ,QACnBwN,EAAiBzU,EAAElC,KAAK8X,eACxB/K,OAAO3C,oBAAoB,UAAWyN,GAEtCI,EAAMG,e,oVCvGG,WACb,IAAIC,GACJ,IAAA7J,SAAO,SAAAxO,GACa,oBAAdA,EAAK4D,KACP,kGAA4B0D,MAAK,SAAAgR,IAG/BC,EAFoBD,EAAIE,SAEZ7V,SAAS8V,gBAAiB,CACpCC,QAAS,SAAAC,GAGP,QAAK3Y,EAAKA,KAAK4Y,mBAAoBD,IAOrCE,MAAO,6BACPC,SAAS,EACTC,YAAY,IACXzR,MAAK,SAAA0R,GACN,IAAMC,EAAsBtW,SAASC,cAAc,UAC7CsW,EAAiBvW,SAAS8V,gBAAgBU,WAC1CC,EAAgBzW,SAAS8V,gBAAgBY,UAE/CJ,EAAoBjC,MAAQgC,EAAOhC,MAAQkC,EAC3CD,EAAoBhC,OAAS+B,EAAO/B,OAASmC,EAC7CH,EACGK,WAAW,MACXC,UACCP,EACAE,EACAE,EACAH,EAAoBjC,MACpBiC,EAAoBhC,OACpB,EACA,EACAgC,EAAoBjC,MACpBiC,EAAoBhC,SAGxB,IAAAtJ,UAAS,CACP/J,KAAM,uBACN4V,WAAYP,EAAoBQ,oBAIf,2BAAdzZ,EAAK4D,MACdyU,EAAiB1V,SAAS8V,gBAAgBiB,MAAMC,OAChDhX,SAAS8V,gBAAgBiB,MAAMC,OAA/B,2SACuB,2BAAd3Z,EAAK4D,OACdjB,SAAS8V,gBAAgBiB,MAAMC,OAAStB,MAgB5CtL,OAAO7C,iBAAiB,WAZP,SAAA5G,GAEC,MAAdA,EAAMkC,KACNlC,EAAMsW,WACLtW,EAAMuW,SAAWvW,EAAMwW,WAExBxW,EAAMyW,kBACN,IAAApM,UAAS,CACP/J,KAAM,6C,uVCvCC,WAkFb,OAtEAnD,OAAOgM,OAAOM,OAAOiN,QAAS,CAC5BC,GAD4B,SACzBC,GACD,IAAMC,EAASC,EAAkBF,EACjC,GAAIC,GAAU,GAAKA,GAAUE,EAAY7Z,OAAS,EAAG,OAE5B6Z,EADvBD,EAAkBD,GACVxG,EAF2C,EAE3CA,IAAK2G,EAFsC,EAEtCA,MACPC,EAAS5X,SAASqK,SAASC,KACjCuN,EAAiBC,aAAa7Z,KAAKmM,OAAOiN,QAASM,EAAO,GAAI3G,GAC9D,IAAM+G,EAAS/X,SAASqK,SAASC,KACjC0N,EAAcD,GACd3N,OAAO6N,cAAc,IAAIC,cAAc,WAAY,CAAEP,YACxB,IAAzBI,EAAOxN,QAAQ,OACjB4N,GAAwB,EACxB/N,OAAO6N,cACL,IAAIG,gBAAgB,aAAc,CAAER,SAAQG,eAMpDM,KApB4B,WAqB1BjO,OAAOiN,QAAQC,IAAI,IAGrBgB,QAxB4B,WAyB1BlO,OAAOiN,QAAQC,GAAG,IAGpBiB,UA5B4B,SA4BlBZ,EAAOzP,EAAO8I,GACtB6G,EAAiBC,aAAa7Z,KAAKmM,OAAOiN,QAASM,EAAOzP,EAAO8I,GACjEwH,EAAYxH,EAAK2G,GACjBK,EAAchY,SAASqK,SAASC,OAGlCwN,aAlC4B,SAkCfH,EAAOzP,EAAO8I,GACzB6G,EAAiBC,aAAa7Z,KAAKmM,OAAOiN,QAASM,EAAOzP,EAAO8I,GACjE0G,EAAYD,GAAmB,CAAEE,QAAO3G,OACxCgH,EAAchY,SAASqK,SAASC,SAIpCxM,OAAO2a,iBAAiBrO,OAAOiN,QAAS,CACtCxZ,OAAQ,CACNsE,IADM,WAEJ,OAAOuV,EAAY7Z,SAIvB8Z,MAAO,CACLxV,IADK,WAEH,OAAOuV,EAAYD,GAAiBE,UAK1CvN,OAAO7C,iBAAiB,cAAc,WAC/B4Q,EAKHA,GAAwB,GAHxBK,EADYE,EAAa1Y,SAASqK,UACjB,MACjB2N,EAAchY,SAASqK,SAASC,UAMpCkO,EAAYE,EAAa1Y,SAASqK,UAAW,MAE7C7I,YAAW,WACTwW,EAAchY,SAASqK,SAASC,UAE3B,IAAAuB,SAjFP,SAAuBxO,EAAM0J,GACvBA,IACgB,YAAd1J,EAAK4D,KACPoW,QAAQgB,OACe,eAAdhb,EAAK4D,KACdoW,QAAQiB,UACe,YAAdjb,EAAK4D,MACdjB,SAASqK,SAAS8J,cAjC1B,IAAM0D,EAAmBzN,OAAOiN,QAAQsB,UAClCjB,EAAc,GAChBD,GAAmB,EACnBU,GAAwB,EAE5B,SAASH,EAAchH,IACrB,IAAAhG,UAAS,CACP/J,KAAM,YACN+P,MACAqH,KAAMZ,EAAkB,EACxBa,QAASb,EAAkBC,EAAY7Z,OAAS,IAIpD,SAAS2a,EAAYxH,EAAK2G,GAExBD,EAAY3Y,OAAO0Y,EAAkB,GACrCC,EAAYvZ,KAAK,CAAE6S,MAAK2G,UACxBF,EAAkBC,EAAY7Z,OAAS,EAGzC,SAAS6a,EAAarO,GACpB,gBAAUA,EAASuO,UAAnB,OAA8BvO,EAASwO,S,wFCxBzC,kaAUAzO,OAAO0O,aAAe,GACtB,IAAK,IAAInb,EAAI,EAAGA,EAF+B,EAEVA,IAAK,CACxC,IAAMob,EAAS,IAAIC,IACnB5O,OAAO0O,aAAa3a,KAAK4a,GAGzBA,EAAO/R,YAAY,CACjB/F,KAAM,SACN0H,KAAM,UACNsQ,KAAM,gBACNC,OAAQ,CAAEC,QAAS,CAAC,QACpBC,QAAS,EACTC,cAAe,KAIdlP,iBAEHmP,MACAC,MACAC,mCACAC","file":"static/js/sandbox-startup.e47bfcd95.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t8: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"static/js/\" + ({}[chunkId]||chunkId) + \".\" + {\"20\":\"1083adf65\",\"22\":\"5f7ce732f\"}[chunkId] + \".chunk.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = this[\"csbJsonP\"] = this[\"csbJsonP\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/sandbox/startup.js\",12]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = function() {\n  return new Worker(\"/\" + \"babel-transpiler.d555f77c.worker.js\");\n};","var transformers = [];\nfunction transformError(error, module, modules) {\n    var transformedErrors = transformers.map(function (c) { return c(error, module, modules); }).filter(function (x) { return x != null; });\n    return transformedErrors[0];\n}\nfunction clearErrorTransformers() {\n    transformers.length = 0;\n}\nfunction registerErrorTransformer(check) {\n    transformers.push(check);\n}\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar generateId = function () {\n    // Such a random ID\n    return Math.floor(Math.random() * 1000000 + Math.random() * 1000000);\n};\nvar getConstructorName = function (x) {\n    try {\n        return x.constructor.name;\n    }\n    catch (e) {\n        return '';\n    }\n};\nvar Protocol = /** @class */ (function () {\n    function Protocol(type, handleMessage, target) {\n        var _this = this;\n        this.type = type;\n        this.handleMessage = handleMessage;\n        this.target = target;\n        this.outgoingMessages = new Set();\n        this._messageListener = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            var data, result, returnMessage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        data = e.data;\n                        if (data.$type !== this.getTypeId()) {\n                            return [2 /*return*/];\n                        }\n                        // We are getting a response to the message\n                        if (this.outgoingMessages.has(data.$id)) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.handleMessage(data.$data)];\n                    case 1:\n                        result = _a.sent();\n                        returnMessage = {\n                            $originId: this.internalId,\n                            $type: this.getTypeId(),\n                            $data: result,\n                            $id: data.$id,\n                        };\n                        if (e.source) {\n                            // @ts-ignore\n                            e.source.postMessage(returnMessage, '*');\n                        }\n                        else {\n                            this._postMessage(returnMessage);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        this.createConnection();\n        this.internalId = generateId();\n        this.isWorker = getConstructorName(target) === 'Worker';\n    }\n    Protocol.prototype.getTypeId = function () {\n        return \"p-\" + this.type;\n    };\n    Protocol.prototype.createConnection = function () {\n        self.addEventListener('message', this._messageListener);\n    };\n    Protocol.prototype.dispose = function () {\n        self.removeEventListener('message', this._messageListener);\n    };\n    Protocol.prototype.sendMessage = function (data) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var messageId = generateId();\n            var message = {\n                $originId: _this.internalId,\n                $type: _this.getTypeId(),\n                $data: data,\n                $id: messageId,\n            };\n            _this.outgoingMessages.add(messageId);\n            var listenFunction = function (e) {\n                var data = e.data;\n                if (data.$type === _this.getTypeId() &&\n                    data.$id === messageId &&\n                    data.$originId !== _this.internalId) {\n                    resolve(data.$data);\n                    self.removeEventListener('message', listenFunction);\n                }\n            };\n            self.addEventListener('message', listenFunction);\n            _this._postMessage(message);\n        });\n    };\n    Protocol.prototype._postMessage = function (m) {\n        if (this.isWorker ||\n            // @ts-ignore Unknown to TS\n            (typeof DedicatedWorkerGlobalScope !== 'undefined' &&\n                // @ts-ignore Unknown to TS\n                this.target instanceof DedicatedWorkerGlobalScope)) {\n            // @ts-ignore\n            this.target.postMessage(m);\n        }\n        else {\n            this.target.postMessage(m, '*');\n        }\n    };\n    return Protocol;\n}());\n\n/**\n * Returns an action that describes to open a notification in the editor\n *\n * @export\n * @param {string} title\n * @param {('notice' | 'warning' | 'error' | 'success')} [notificationType='notice']\n * @param {number} [timeAlive=2] How long the notification should show in seconds\n * @returns {NotificationAction}\n */\nfunction show(title, notificationType, timeAlive) {\n    if (notificationType === void 0) { notificationType = 'notice'; }\n    if (timeAlive === void 0) { timeAlive = 2; }\n    // TODO automatically add type: 'action', maybe do this after conversion to TS\n    return {\n        type: 'action',\n        action: 'notification',\n        title: title,\n        notificationType: notificationType,\n        timeAlive: timeAlive,\n    };\n}\n\n\nvar notifications = Object.freeze({\n\tshow: show\n});\n\nfunction openModule(id, lineNumber, column) {\n    // TODO automatically add type: 'action', maybe do this after conversion to TS\n    return {\n        type: 'action',\n        action: 'editor.open-module',\n        path: id,\n        lineNumber: lineNumber,\n        column: column,\n    };\n}\n\n\nvar editor = Object.freeze({\n\topenModule: openModule\n});\n\nfunction add(dependencyName) {\n    return {\n        type: 'action',\n        action: 'source.dependencies.add',\n        dependency: dependencyName,\n    };\n}\n\n\nvar d = Object.freeze({\n\tadd: add\n});\n\nfunction rename(path, title) {\n    return {\n        type: 'action',\n        action: 'source.module.rename',\n        path: path,\n        title: title,\n    };\n}\n\n\nvar m = Object.freeze({\n\trename: rename\n});\n\nvar dependencies = d;\nvar modules = m;\n\n\nvar source = Object.freeze({\n\tdependencies: dependencies,\n\tmodules: modules\n});\n\n/**\n * Returns an action that describes to show an error\n * in the code of the editor (with the red squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {ErrorOptions} { line, column, path, payload }\n * @returns {ErrorAction}\n */\nfunction show$1(title, message, _a) {\n    var line = _a.line, column = _a.column, lineEnd = _a.lineEnd, columnEnd = _a.columnEnd, path = _a.path, payload = _a.payload, source = _a.source;\n    return {\n        title: title,\n        message: message,\n        line: line,\n        column: column,\n        path: path,\n        payload: payload,\n        lineEnd: lineEnd,\n        columnEnd: columnEnd,\n        severity: 'error',\n        type: 'action',\n        action: 'show-error',\n        source: source || 'browser',\n    };\n}\nfunction clear(path, source) {\n    return {\n        type: 'action',\n        action: 'clear-errors',\n        path: path,\n        source: source,\n    };\n}\n\n\nvar error = Object.freeze({\n\tshow: show$1,\n\tclear: clear\n});\n\n/**\n * Returns an action that describes to show a correction\n * in the code of the editor (with the yellow/blue squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {CorrectionOptions} { line, column, payload }\n * @returns {CorrectionAction}\n */\nfunction show$2(message, _a) {\n    var _b = _a === void 0 ? {\n        path: '',\n        severity: 'warning',\n        source: '',\n    } : _a, line = _b.line, column = _b.column, lineEnd = _b.lineEnd, columnEnd = _b.columnEnd, path = _b.path, payload = _b.payload, _c = _b.severity, severity = _c === void 0 ? 'warning' : _c, _d = _b.source, source = _d === void 0 ? '' : _d;\n    return {\n        message: message,\n        line: line,\n        column: column,\n        lineEnd: lineEnd,\n        columnEnd: columnEnd,\n        path: path,\n        payload: payload,\n        severity: severity,\n        source: source,\n        type: 'action',\n        action: 'show-correction',\n    };\n}\nfunction clear$1(path, source) {\n    return {\n        type: 'action',\n        action: 'clear-corrections',\n        path: path,\n        source: source,\n    };\n}\n\n\nvar correction = Object.freeze({\n\tshow: show$2,\n\tclear: clear$1\n});\n\n/**\n * Returns an action that describes to show a correction\n * in the code of the editor (with the yellow/blue squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {CorrectionOptions} { line, column, payload }\n * @returns {CorrectionAction}\n */\nfunction show$3(_a) {\n    var line = _a.line, path = _a.path, className = _a.className;\n    return {\n        line: line,\n        path: path,\n        className: className,\n        type: 'action',\n        action: 'show-glyph',\n    };\n}\n\n\nvar glyph = Object.freeze({\n\tshow: show$3\n});\n\n// All actions of the editor are defined here. The sandbox can send messages\n// like `source.files.rename` which the editor will see as an action to rename\n// a module. This will allow plugins to alter project content in the future\nvar actions = {\n    notifications: notifications,\n    editor: editor,\n    source: source,\n    error: error,\n    correction: correction,\n    glyph: glyph,\n};\n\nvar host = process.env.CODESANDBOX_HOST;\nvar host$1 = host || 'https://codesandbox.io';\n\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// import * as debug from 'debug';\nvar bundlers = new Map();\nfunction checkIsStandalone() {\n    if (typeof window === 'undefined') {\n        return true;\n    }\n    if (window.location && window.location.href.indexOf('?standalone') > -1) {\n        return true;\n    }\n    if (window.opener || window.parent !== window) {\n        if (window.location && window.location.href.indexOf(host$1) > -1) {\n            // If this location href is codesandbox.io or something, we're most probably in an embed\n            // iframed on another page. This means that we're actually standalone, but we're fooled\n            // by the fact that we're embedded somewhere else.\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\n// Whether the tab has a connection with the editor\nvar isStandalone = checkIsStandalone();\nvar iframeHandshakeDone;\n/**\n * Resolves when the handshake between the frame and the editor has succeeded\n */\nvar iframeHandshake = new Promise(function (resolve) {\n    iframeHandshakeDone = resolve;\n});\n// Field used by a \"child\" frame to determine its parent origin\nvar parentOrigin = null;\nvar parentId = null;\nvar parentOriginListener = function (e) {\n    var _a;\n    if (e.data.type === 'register-frame' && !parentId) {\n        parentOrigin = e.data.origin;\n        parentId = (_a = e.data.id) !== null && _a !== void 0 ? _a : null;\n        if (iframeHandshakeDone) {\n            iframeHandshakeDone();\n        }\n        self.removeEventListener('message', parentOriginListener);\n    }\n};\nif (typeof window !== 'undefined') {\n    self.addEventListener('message', parentOriginListener);\n}\nfunction resetState() {\n    parentOrigin = null;\n    bundlers.clear();\n}\n/**\n * Send a message to the editor, this is most probably an action you generated\n *\n * @export\n * @param {*} message\n * @returns\n */\nfunction dispatch(message) {\n    if (!message)\n        return;\n    var newMessage = __assign(__assign({}, message), { codesandbox: true });\n    if (parentId !== null) {\n        newMessage.$id = parentId;\n    }\n    notifyListeners(newMessage);\n    notifyFrames(newMessage);\n    if (isStandalone)\n        return;\n    if (parentOrigin === null && message.type !== 'initialized')\n        return;\n    if (window.opener) {\n        window.opener.postMessage(newMessage, parentOrigin === null ? '*' : parentOrigin);\n    }\n    else {\n        window.parent.postMessage(newMessage, parentOrigin === null ? '*' : parentOrigin);\n    }\n}\nvar listeners = {};\nvar listenerId = 0;\n/**\n * Listen to everything that comes in from either the editor or the sandbox\n * @param callback Call this function to 'unlisten'\n */\nfunction listen(callback) {\n    var id = ++listenerId;\n    listeners[id] = callback;\n    return function () {\n        delete listeners[id];\n    };\n}\nfunction notifyListeners(data, source) {\n    // eslint-disable-next-line no-shadow\n    Object.keys(listeners).forEach(function (listenerId) {\n        if (listeners[listenerId]) {\n            try {\n                listeners[listenerId](data, source);\n            }\n            catch (e) {\n                /**/\n            }\n        }\n    });\n}\nfunction notifyFrames(message) {\n    var rawMessage = JSON.parse(JSON.stringify(message));\n    bundlers.forEach(function (origin, frame) {\n        if (frame && frame.postMessage) {\n            frame.postMessage(__assign(__assign({}, rawMessage), { codesandbox: true }), origin);\n        }\n    });\n}\nfunction eventListener(e) {\n    var data = e.data;\n    if (data &&\n        data.codesandbox &&\n        (parentOrigin === null || e.origin === parentOrigin) &&\n        (data.$id == null || parentId === null || parentId === data.$id)) {\n        notifyListeners(data, e.source);\n    }\n}\n/**\n * Register an window as a output the `dispatch` function can send messages to.\n *\n * @param frame\n */\nfunction registerFrame(frame, origin, bundlerId) {\n    bundlers.set(frame, origin);\n    frame.postMessage({\n        type: 'register-frame',\n        origin: document.location.origin,\n        id: bundlerId,\n    }, origin);\n}\nif (typeof window !== 'undefined') {\n    if (isStandalone) {\n        window.addEventListener('message', eventListener);\n    }\n    else {\n        iframeHandshake.then(function () {\n            // We now start listening so we can let our listeners know\n            window.addEventListener('message', eventListener);\n        });\n    }\n}\nfunction reattach() {\n    if (isStandalone) {\n        window.addEventListener('message', eventListener);\n    }\n    else {\n        iframeHandshake.then(function () {\n            window.addEventListener('message', eventListener);\n        });\n    }\n}\n\n// Errors\n\nexport { Protocol, transformError, clearErrorTransformers, registerErrorTransformer, actions, isStandalone, iframeHandshake, resetState, dispatch, listen, notifyListeners, registerFrame, reattach };\n//# sourceMappingURL=codesandbox.es5.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isServer = void 0;\nconst SERVER_TEMPLATE_NAMES = [\n    'adonis',\n    'apollo',\n    'ember',\n    'gatsby',\n    'gridsome',\n    'marko',\n    'mdx-deck',\n    'nest',\n    'next',\n    'node',\n    'nuxt',\n    'quasar',\n    'sapper',\n    'styleguidist',\n    'unibit',\n    'vuepress',\n    'docusaurus',\n];\nexports.isServer = (template) => SERVER_TEMPLATE_NAMES.indexOf(template) !== -1;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dashboard = exports.teamInviteLink = exports.getSandboxId = exports.privacyUrl = exports.tosUrl = exports.curatorUrl = exports.patronUrl = exports.searchUrl = exports.gitHubToSandboxUrl = exports.optionsToParameterizedUrl = exports.githubRepoUrl = exports.profileLikesUrl = exports.profileSandboxesUrl = exports.teamOverviewUrl = exports.exploreUrl = exports.dashboardUrl = exports.profileUrl = exports.signInVercelUrl = exports.signInUrl = exports.signInPageUrl = exports.forkSandboxUrl = exports.frameUrl = exports.embedUrl = exports.sandboxUrl = exports.editorUrl = exports.uploadFromCliUrl = exports.newCxJSSandboxUrl = exports.newAngularSandboxUrl = exports.newSvelteSandboxUrl = exports.importFromGitHubUrl = exports.newVueSandboxUrl = exports.newPreactSandboxUrl = exports.newDojoSandboxUrl = exports.newReactTypeScriptSandboxUrl = exports.parcelSandboxUrl = exports.newSandboxUrl = exports.newSandboxWizard = exports.protocolAndHost = exports.host = exports.gitHubRepoPattern = void 0;\nconst is_server_1 = require(\"../templates/helpers/is-server\");\nconst dashboard = __importStar(require(\"./url-generator/dashboard\"));\nexports.dashboard = dashboard;\nexports.gitHubRepoPattern = /(https?:\\/\\/)?((www.)?)github.com(\\/[\\w-]+){2,}/;\nconst gitHubPrefix = /(https?:\\/\\/)?((www.)?)github.com/;\nconst dotGit = /(\\.git)$/;\nconst sandboxHost = {\n    'https://codesandbox.io': 'https://csb.app',\n    'https://codesandbox.stream': 'https://codesandbox.dev',\n};\nconst buildEncodedUri = (strings, ...values) => strings[0] +\n    values\n        .map((value, i) => `${encodeURIComponent(value)}${strings[i + 1]}`)\n        .join('');\nexports.host = () => {\n    if (process.env.NODE_ENV === 'production') {\n        return process.env.CODESANDBOX_HOST.split('//')[1];\n    }\n    if (process.env.LOCAL_SERVER) {\n        return 'localhost:3000';\n    }\n    return process.env.DEV_DOMAIN;\n};\nexports.protocolAndHost = () => `${location.protocol}//${exports.host()}`;\nexports.newSandboxWizard = () => `/s`;\nexports.newSandboxUrl = () => `/s/new`;\nexports.parcelSandboxUrl = () => `/s/vanilla`;\nexports.newReactTypeScriptSandboxUrl = () => `/s/react-ts`;\nexports.newDojoSandboxUrl = () => `/s/github/dojo/dojo-codesandbox-template`;\nexports.newPreactSandboxUrl = () => `/s/preact`;\nexports.newVueSandboxUrl = () => `/s/vue`;\nexports.importFromGitHubUrl = () => `/s/github`;\nexports.newSvelteSandboxUrl = () => `/s/svelte`;\nexports.newAngularSandboxUrl = () => `/s/angular`;\nexports.newCxJSSandboxUrl = () => `/s/github/codaxy/cxjs-codesandbox-template`;\nexports.uploadFromCliUrl = () => `/s/cli`;\nconst sandboxGitUrl = (git) => buildEncodedUri `github/${git.username}/${git.repo}/tree/${git.branch}/` +\n    git.path;\nexports.editorUrl = () => `/s/`;\nexports.sandboxUrl = (sandboxDetails) => {\n    if (sandboxDetails.git) {\n        const { git } = sandboxDetails;\n        return `${exports.editorUrl()}${sandboxGitUrl(git)}`;\n    }\n    if (sandboxDetails.alias) {\n        return `${exports.editorUrl()}${sandboxDetails.alias}`;\n    }\n    return `${exports.editorUrl()}${sandboxDetails.id}`;\n};\nexports.embedUrl = (sandbox) => {\n    if (sandbox.git) {\n        const { git } = sandbox;\n        return `/embed/${sandboxGitUrl(git)}`;\n    }\n    if (sandbox.alias) {\n        return `/embed/${sandbox.alias}`;\n    }\n    return `/embed/${sandbox.id}`;\n};\nconst stagingFrameUrl = (shortid, path) => {\n    const stagingHost = (process.env.CODESANDBOX_HOST\n        ? process.env.CODESANDBOX_HOST\n        : '').split('//')[1];\n    const segments = stagingHost.split('.');\n    const first = segments.shift();\n    return `${location.protocol}//${first}-${shortid}.${segments.join('.')}/${path}`;\n};\nexports.frameUrl = (sandbox, append = '', { useFallbackDomain = false, port = undefined, } = {}) => {\n    const path = append.indexOf('/') === 0 ? append.substr(1) : append;\n    const templateIsServer = is_server_1.isServer(sandbox.template);\n    if (process.env.LOCAL_SERVER) {\n        return `http://localhost:3002/${path}`;\n    }\n    if (process.env.STAGING) {\n        return stagingFrameUrl(sandbox.id, path);\n    }\n    let sHost = exports.host();\n    if (`https://${sHost}` in sandboxHost &&\n        !useFallbackDomain &&\n        !templateIsServer) {\n        sHost = sandboxHost[`https://${sHost}`].split('//')[1];\n    }\n    return `${location.protocol}//${sandbox.id}${port ? `-${port}` : ''}.${templateIsServer ? 'sse.' : ''}${sHost}/${path}`;\n};\nexports.forkSandboxUrl = (sandbox) => `${exports.sandboxUrl(sandbox)}/fork`;\nexports.signInPageUrl = (redirectTo) => {\n    let url = `/signin`;\n    if (redirectTo) {\n        url += '?continue=' + redirectTo;\n    }\n    return url;\n};\nexports.signInUrl = (extraScopes = false) => '/auth/github' + (extraScopes ? '?scope=user:email,public_repo' : '');\nexports.signInVercelUrl = () => '/auth/vercel';\nexports.profileUrl = (username) => `/u/${username}`;\nexports.dashboardUrl = () => `/dashboard`;\nexports.exploreUrl = () => `/explore`;\nexports.teamOverviewUrl = (teamId) => `/dashboard/teams/${teamId}`;\nexports.profileSandboxesUrl = (username, page) => `${exports.profileUrl(username)}/sandboxes${page ? `/${page}` : ''}`;\nexports.profileLikesUrl = (username, page) => `${exports.profileUrl(username)}/likes${page ? `/${page}` : ''}`;\nexports.githubRepoUrl = ({ repo, branch, username, path, }) => buildEncodedUri `https://github.com/${username}/${repo}/tree/${branch}/` +\n    path;\nexports.optionsToParameterizedUrl = (options) => {\n    const keyValues = Object.keys(options)\n        .sort()\n        .filter(a => options[a])\n        .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(options[key])}`)\n        .join('&');\n    return keyValues ? `?${keyValues}` : '';\n};\nexports.gitHubToSandboxUrl = (githubUrl) => githubUrl.replace(gitHubPrefix, '/s/github').replace(dotGit, '');\nexports.searchUrl = (query) => `/search${query ? `?query=${query}` : ''}`;\nexports.patronUrl = () => `/patron`;\nexports.curatorUrl = () => `/curator`;\nexports.tosUrl = () => `/legal/terms`;\nexports.privacyUrl = () => `/legal/privacy`;\nfunction getSandboxId() {\n    const csbHost = process.env.CODESANDBOX_HOST;\n    if (process.env.LOCAL_SERVER) {\n        return document.location.hash.replace('#', '');\n    }\n    if (process.env.STAGING) {\n        const segments = csbHost.split('//')[1].split('.');\n        const first = segments.shift();\n        const re = RegExp(`${first}-(.*)\\\\.${segments.join('\\\\.')}`);\n        return document.location.host.match(re)[1];\n    }\n    let result;\n    [csbHost, sandboxHost[csbHost]].filter(Boolean).forEach(tryHost => {\n        const hostRegex = tryHost.replace(/https?:\\/\\//, '').replace(/\\./g, '\\\\.');\n        const sandboxRegex = new RegExp(`(.*)\\\\.${hostRegex}`);\n        const matches = document.location.host.match(sandboxRegex);\n        if (matches) {\n            result = matches[1];\n        }\n    });\n    if (!result) {\n        throw new Error(`Can't detect sandbox ID from the current URL`);\n    }\n    return result;\n}\nexports.getSandboxId = getSandboxId;\nexports.teamInviteLink = (inviteToken) => `${exports.protocolAndHost()}/invite/${inviteToken}`;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.search = exports.createWorkspace = exports.teamInvite = exports.permissionSettings = exports.registrySettings = exports.settings = exports.home = exports.deleted = exports.recents = exports.templates = exports.alwaysOn = exports.repos = exports.drafts = exports.allSandboxes = exports.ALL_SANDBOXES_URL_PREFIX = exports.DASHBOARD_URL_PREFIX = void 0;\nexports.DASHBOARD_URL_PREFIX = '/dashboard';\nexports.ALL_SANDBOXES_URL_PREFIX = `${exports.DASHBOARD_URL_PREFIX}/all`;\nfunction appendTeamIdQueryParam(url, teamId) {\n    if (teamId) {\n        return `${url}?workspace=${teamId}`;\n    }\n    return url;\n}\nfunction sanitizePath(path) {\n    return path\n        .split('/')\n        .map(p => p.split(' ').map(encodeURIComponent).join(' '))\n        .join('/');\n}\nexports.allSandboxes = (path, teamId) => appendTeamIdQueryParam(`${exports.ALL_SANDBOXES_URL_PREFIX}${sanitizePath(path)}`, teamId);\nexports.drafts = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/drafts`, teamId);\nexports.repos = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/repositories`, teamId);\nexports.alwaysOn = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/always-on`, teamId);\nexports.templates = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/templates`, teamId);\nexports.recents = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/recent`, teamId);\nexports.deleted = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/deleted`, teamId);\nexports.home = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/home`, teamId);\nexports.settings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings`, teamId);\nexports.registrySettings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/npm-registry`, teamId);\nexports.permissionSettings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/permissions`, teamId);\nexports.teamInvite = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/invite`, teamId);\nexports.createWorkspace = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/new`, teamId);\nexports.search = (query, teamId) => {\n    let searchUrl = appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/search`, teamId);\n    if (searchUrl.includes('?')) {\n        searchUrl += '&';\n    }\n    else {\n        searchUrl += '?';\n    }\n    searchUrl += `query=${query}`;\n    return searchUrl;\n};\n","import { dispatch, listen, iframeHandshake } from 'codesandbox-api';\nimport Hook from 'console-feed/lib/Hook';\nimport { Encode } from 'console-feed/lib/Transform';\n\nexport default function setupConsole() {\n  Hook(window.console, async log => {\n    await iframeHandshake;\n    dispatch({\n      type: 'console',\n      log,\n    });\n  });\n\n  function handleMessage(data, source) {\n    if (source) {\n      if (data.type === 'evaluate') {\n        let result = null;\n        let error = false;\n        try {\n          // Attempt to wrap command in parentheses, fixing issues\n          // where directly returning objects results in unexpected\n          // behaviour.\n          if (data.command && data.command.charAt(0) === '{') {\n            try {\n              const wrapped = `(${data.command})`;\n              // `new Function` is used to validate Javascript syntax\n              // eslint-disable-next-line\n              const validate = new Function(wrapped);\n              data.command = wrapped;\n            } catch (e) {\n              // We shouldn't wrap the expression\n            }\n          }\n\n          result = (0, eval)(data.command); // eslint-disable-line no-eval\n        } catch (e) {\n          result = e;\n          error = true;\n        }\n\n        try {\n          dispatch({\n            type: 'eval-result',\n            error,\n            result: Encode(result),\n          });\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    }\n  }\n\n  return listen(handleMessage);\n}\n","import { protocolAndHost } from '@codesandbox/common/lib/utils/url-generator';\n\nconst PREVIEW_SECRET_COOKIE_NAME = 'csb_sandbox_secret';\n\nexport const getPreviewSecret = () =>\n  document.cookie.replace(\n    new RegExp(\n      `(?:(?:^|.*;\\\\s*)${PREVIEW_SECRET_COOKIE_NAME}\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$`\n    ),\n    '$1'\n  );\n\nexport const setPreviewSecret = secret => {\n  if (secret === null) {\n    return;\n  }\n\n  const cookieValue = getPreviewSecret();\n  if (\n    (cookieValue && !secret) ||\n    (secret && !cookieValue) ||\n    cookieValue !== secret\n  ) {\n    if (secret) {\n      document.cookie = `${PREVIEW_SECRET_COOKIE_NAME}=${secret};samesite=none;secure;`;\n\n      setTimeout(() => {\n        location.reload();\n      }, 1000);\n    } else {\n      document.cookie = `${PREVIEW_SECRET_COOKIE_NAME}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n    }\n  }\n};\n\nexport const listenForPreviewSecret = () => {\n  const listener = data => {\n    if (data.data && data.data.$type === 'preview-secret') {\n      const { previewSecret } = data.data;\n      setPreviewSecret(previewSecret);\n    }\n  };\n\n  window.addEventListener('message', listener);\n\n  return () => {\n    window.removeEventListener('message', listener);\n  };\n};\n\nfunction getPopupOffset({ width, height }) {\n  const wLeft = window.screenLeft ? window.screenLeft : window.screenX;\n  const wTop = window.screenTop ? window.screenTop : window.screenY;\n\n  const left = wLeft + window.innerWidth / 2 - width / 2;\n  const top = wTop + window.innerHeight / 2 - height / 2;\n\n  return { top, left };\n}\n\nfunction getPopupSize() {\n  return { width: 1020, height: 618 };\n}\n\nfunction getPopupDimensions() {\n  const { width, height } = getPopupSize();\n  const { top, left } = getPopupOffset({ width, height });\n\n  return `width=${width},height=${height},top=${top},left=${left}`;\n}\n\n/**\n * This helper function is purely there to also work when we're building\n * for SSE, which means that the env vars are not set and we thus don't\n * know the host.\n */\nfunction getProtocolAndHostWithSSE() {\n  if (process.env.CODESANDBOX_HOST) {\n    return protocolAndHost();\n  }\n\n  if (document.location.host.endsWith('.stream')) {\n    return 'https://codesandbox.stream';\n  }\n\n  return 'https://codesandbox.io';\n}\n\nexport const requestPreviewSecretFromApp = sandboxId => {\n  const host = getProtocolAndHostWithSSE();\n  const popup = window.open(\n    host + '/auth/sandbox/' + sandboxId,\n    name,\n    `scrollbars=no,toolbar=no,location=no,titlebar=no,directories=no,status=no,menubar=no, ${getPopupDimensions()}`\n  );\n\n  setInterval(() => {\n    popup.postMessage({ $type: 'request-preview-secret' }, host);\n  }, 500);\n\n  const listener = e => {\n    if (e.data && e.data.$type === 'preview-secret') {\n      setPreviewSecret(e.data.previewSecret);\n      window.removeEventListener('message', listener);\n\n      popup.close();\n    }\n  };\n  window.addEventListener('message', listener);\n};\n","import { dispatch, listen } from 'codesandbox-api';\n\nexport default function setupScreenshotListener() {\n  let existingCursor;\n  listen(data => {\n    if (data.type === 'take-screenshot') {\n      import('./html2canvas-lib').then(lib => {\n        const html2canvas = lib.default;\n\n        html2canvas(document.documentElement, {\n          useCORS: isSameOrigin => {\n            // When it is a public sandbox the image url will be redirected to a\n            // cross origin url, so we need to force CORS\n            if (!data.data.isPrivateSandbox && isSameOrigin) {\n              return true;\n            }\n\n            // By default we do not use cors, which means cross origin images will use the proxy\n            return false;\n          },\n          proxy: 'https://h2c-proxy.csb.dev/',\n          logging: false,\n          allowTaint: false,\n        }).then(canvas => {\n          const scrollCroppedCanvas = document.createElement('canvas');\n          const cropScrollLeft = document.documentElement.scrollLeft;\n          const cropScrollTop = document.documentElement.scrollTop;\n\n          scrollCroppedCanvas.width = canvas.width - cropScrollLeft;\n          scrollCroppedCanvas.height = canvas.height - cropScrollTop;\n          scrollCroppedCanvas\n            .getContext('2d')\n            .drawImage(\n              canvas,\n              cropScrollLeft,\n              cropScrollTop,\n              scrollCroppedCanvas.width,\n              scrollCroppedCanvas.height,\n              0,\n              0,\n              scrollCroppedCanvas.width,\n              scrollCroppedCanvas.height\n            );\n\n          dispatch({\n            type: 'screenshot-generated',\n            screenshot: scrollCroppedCanvas.toDataURL(),\n          });\n        });\n      });\n    } else if (data.type === 'show-screenshot-cursor') {\n      existingCursor = document.documentElement.style.cursor;\n      document.documentElement.style.cursor = `url('data:image/svg+xml;utf8,<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16H0V8Z\" fill=\"%23FF3B30\"/></svg>'), auto`;\n    } else if (data.type === 'hide-screenshot-cursor') {\n      document.documentElement.style.cursor = existingCursor;\n    }\n  });\n\n  const listener = event => {\n    if (\n      event.key === 's' &&\n      event.shiftKey &&\n      (event.metaKey || event.ctrlKey)\n    ) {\n      event.preventDefault();\n      dispatch({\n        type: 'screenshot-requested-from-preview',\n      });\n    }\n  };\n  window.addEventListener('keydown', listener);\n}\n","import { dispatch, listen } from 'codesandbox-api';\n\nconst origHistoryProto = window.history.__proto__; // eslint-disable-line no-proto\nconst historyList = [];\nlet historyPosition = -1;\nlet disableNextHashChange = false;\n\nfunction sendUrlChange(url) {\n  dispatch({\n    type: 'urlchange',\n    url,\n    back: historyPosition > 0,\n    forward: historyPosition < historyList.length - 1,\n  });\n}\n\nfunction pushHistory(url, state) {\n  // remove \"future\" locations\n  historyList.splice(historyPosition + 1);\n  historyList.push({ url, state });\n  historyPosition = historyList.length - 1;\n}\n\nfunction pathWithHash(location) {\n  return `${location.pathname}${location.hash}`;\n}\n\nexport default function setupHistoryListeners() {\n  function handleMessage(data, source) {\n    if (source) {\n      if (data.type === 'urlback') {\n        history.back();\n      } else if (data.type === 'urlforward') {\n        history.forward();\n      } else if (data.type === 'refresh') {\n        document.location.reload();\n      }\n    }\n  }\n  Object.assign(window.history, {\n    go(delta) {\n      const newPos = historyPosition + delta;\n      if (newPos >= 0 && newPos <= historyList.length - 1) {\n        historyPosition = newPos;\n        const { url, state } = historyList[historyPosition];\n        const oldURL = document.location.href;\n        origHistoryProto.replaceState.call(window.history, state, '', url);\n        const newURL = document.location.href;\n        sendUrlChange(newURL);\n        window.dispatchEvent(new PopStateEvent('popstate', { state }));\n        if (newURL.indexOf('#') !== -1) {\n          disableNextHashChange = true;\n          window.dispatchEvent(\n            new HashChangeEvent('hashchange', { oldURL, newURL })\n          );\n        }\n      }\n    },\n\n    back() {\n      window.history.go(-1);\n    },\n\n    forward() {\n      window.history.go(1);\n    },\n\n    pushState(state, title, url) {\n      origHistoryProto.replaceState.call(window.history, state, title, url);\n      pushHistory(url, state);\n      sendUrlChange(document.location.href);\n    },\n\n    replaceState(state, title, url) {\n      origHistoryProto.replaceState.call(window.history, state, title, url);\n      historyList[historyPosition] = { state, url };\n      sendUrlChange(document.location.href);\n    },\n  });\n\n  Object.defineProperties(window.history, {\n    length: {\n      get() {\n        return historyList.length;\n      },\n    },\n\n    state: {\n      get() {\n        return historyList[historyPosition].state;\n      },\n    },\n  });\n\n  window.addEventListener('hashchange', () => {\n    if (!disableNextHashChange) {\n      const url = pathWithHash(document.location);\n      pushHistory(url, null);\n      sendUrlChange(document.location.href);\n    } else {\n      disableNextHashChange = false;\n    }\n  });\n\n  pushHistory(pathWithHash(document.location), null);\n\n  setTimeout(() => {\n    sendUrlChange(document.location.href);\n  });\n  return listen(handleMessage);\n}\n","/* eslint-disable import/default */\nimport BabelWorker from 'worker-loader?publicPath=/&name=babel-transpiler.[hash:8].worker.js!./eval/transpilers/babel/worker/index';\n/* eslint-enable import/default */\nimport hookConsole from 'sandbox-hooks/console';\nimport setupHistoryListeners from 'sandbox-hooks/url-listeners';\nimport setupScreenshotListener from 'sandbox-hooks/screenshot';\nimport { listenForPreviewSecret } from 'sandbox-hooks/preview-secret';\nimport { isStandalone } from 'codesandbox-api';\n\nconst WORKERS_TO_LOAD = process.env.SANDPACK ? 1 : 3;\nwindow.babelworkers = [];\nfor (let i = 0; i < WORKERS_TO_LOAD; i++) {\n  const worker = new BabelWorker();\n  window.babelworkers.push(worker);\n\n  // Warm up the babel worker\n  worker.postMessage({\n    type: 'warmup',\n    path: 'test.js',\n    code: 'const a = \"b\"',\n    config: { presets: ['env'] },\n    version: 7,\n    loaderOptions: {},\n  });\n}\n\nif (!isStandalone) {\n  // Means we're in the editor\n  setupHistoryListeners();\n  hookConsole();\n  listenForPreviewSecret();\n  setupScreenshotListener();\n}\n"],"sourceRoot":""}